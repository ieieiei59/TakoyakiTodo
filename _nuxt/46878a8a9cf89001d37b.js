(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{303:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var n=o(21),r=o(31),d=o(319),c=o.n(d),l=function(){function t(e){Object(n.a)(this,t),this.id=e.id,this.addedAt=e.addedAt,this.editedAt=e.addedAt}return Object(r.a)(t,[{key:"_getDate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/mm/dd HH:MM";return c()(t,e)}}]),t}()},306:function(t,e,o){"use strict";o(16),o(5),o(4),o(81),o(58);var n=o(19),r=o(21),d=o(31),c=o(25),l=o(33),v=o(34),m=[{id:1,title:"タコヤキTODOを見る",description:"タコヤキTODOを見る。",addedAt:new Date,editedAt:new Date,isCleared:!1},{id:2,title:"TODOを追加する",description:"TODOを追加する。",addedAt:new Date,editedAt:new Date,isCleared:!1},{id:3,title:"設計する",description:"タコヤキTODOの設計をする。",addedAt:new Date,editedAt:new Date,isCleared:!1},{id:4,title:"開発する",description:"タコヤキTODOの開発をする。",addedAt:new Date,editedAt:new Date,isCleared:!1}],f=o(303),h=o(311),k=o(308),y=o.n(k),w=new(o(320).a)("TakoyakiDB");w.version(1).stores({todos:"id, title, description, addedAt, editedAt, clearedAt, deadline, isCleared, &clearId",todoClears:"id, todoId, takoyakiId, addedAt, editedAt",takoyakis:"id, name, imgURL, rarity, description, addedAt, editedAt"});var D=w,_=function(t){function e(t){var o;return Object(r.a)(this,e),(o=Object(c.a)(this,Object(l.a)(e).call(this,t))).todo=t.todo,o.takoyakiId=t.takoyakiId,o.setTakoyakiItem(),e.lastId=o.id,o}var o,m;return Object(v.a)(e,t),Object(d.a)(e,[{key:"setTakoyakiItem",value:function(){this.takoyakiItem=h.a.get(this.takoyakiId)}},{key:"getTakoyakiImageURL",value:function(){return this.takoyakiItem.getImageURL()}},{key:"_save",value:(m=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:this.id,todoId:this.todo.id,takoyakiId:this.takoyakiItem.id,addedAt:this.addedAt,editedAt:this.editedAt},t.abrupt("return",D.todoClears.put(e));case 2:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"save",value:function(){return this._save()}}],[{key:"create",value:function(t){t.id=y()(),t.addedAt=new Date,t.editedAt=new Date;var o=new e(t);return o._save(),o}},{key:"get",value:(o=Object(n.a)(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(o),t.t0=e,t.next=4,D.todoClears.get(o);case 4:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 6:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})}]),e}(f.a),T=new Date,x={today:new Date(new Date(T.setDate(T.getDate())).setHours(0,0,0,0)),tomorrow:new Date(new Date(T.setDate(T.getDate()+1)).setHours(23,59,59,999)),nextWeek:new Date(new Date(T.setDate(T.getDate()+7)).setHours(23,59,59,999)),nextMonth:new Date(new Date(T.setMonth((T.getMonth()+1)%12)).setHours(23,59,59,999))};o.d(e,"a",(function(){return C}));var C=function(t){function e(t){var o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";switch(Object(r.a)(this,e),(o=Object(c.a)(this,Object(l.a)(e).call(this,t))).title=t.title,o.description=t.description,o.deadline=t.deadline,n){case"add":o.isCleared=!1,o.clearId=null,o.clearedAt=null;break;case"load":o.isCleared=t.isCleared,o.clearId=t.clearId,o.clearedAt=t.clearedAt}return o}var o,f,h,k,w;return Object(v.a)(e,t),Object(d.a)(e,[{key:"getAddedAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy/mm/dd HH:MM";return this._getDate(this.addedAt,t)}},{key:"getEditedAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy/mm/dd HH:MM";return this._getDate(this.editedAt,t)}},{key:"getDeadline",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy/mm/dd HH:MM";return this._getDate(this.deadline,t)}},{key:"clear",value:(w=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={todo:this,takoyakiId:1},this.clearObj=_.create(e),this.clearId=this.clearObj.id,this.clearedAt=new Date,this.isCleared=!0,t.next=7,this._save();case 7:return t.abrupt("return",this);case 8:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"getTakoyakiImageURL",value:function(){return this.isCleared?this.clearObj.getTakoyakiImageURL():""}},{key:"isFailed",value:function(){return this.deadline<new Date&&!this.isCleared}},{key:"isClearedOrFailed",value:function(){return this.isFailed()||this.isCleared}},{key:"save",value:function(){return this._save()}},{key:"delete",value:(k=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.todos.delete(this.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)})},{key:"_save",value:(h=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:this.id,clearId:this.clearId,title:this.title,description:this.description,isCleared:this.isCleared,deadline:this.deadline,addedAt:this.addedAt,editedAt:this.editedAt},t.next=3,D.todos.put(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"loadClearData",value:(f=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("loadClearData: ",this),!this.isCleared){t.next=5;break}return t.next=4,_.get(this.clearId);case 4:this.clearObj=t.sent;case 5:return t.abrupt("return",this);case 6:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})}],[{key:"getList",value:(o=Object(n.a)(regeneratorRuntime.mark((function t(){var filter,o,n,r,d,c,l,v,m=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in filter=m.length>0&&void 0!==m[0]?m[0]:{},o={offset:0,limit:20,daily:!1,weekly:!1,monthly:!1})filter[n]||(filter[n]=o[n]);return r=x.today,d=x.tomorrow,c=x.nextWeek,l=x.nextMonth,v=D.todos,v=(v=filter.daily?v.where("deadline").between(r,d,!0,!0):filter.weekly?v.where("deadline").between(r,c,!0,!0):filter.monthly?v.where("deadline").between(r,l,!0,!0):v.toCollection()).offset(filter.offset).limit(filter.limit),t.next=12,v.sortBy("addedAt");case 12:return v=t.sent,console.log(v),v=(v=v.map((function(t){return new e(t,"load")}))).map((function(t){return t.loadClearData()})),t.next=18,Promise.all(v);case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"get",value:function(t){var o=m.filter((function(e){return e.id===Number(t)}));return o.length<1?null:new e(o[0])}},{key:"add",value:function(t){var o=e.create(t);return o._save(),o}},{key:"create",value:function(t){return t.addedAt=new Date,t.editedAt=new Date,t.id=y()(),t.isCleared=!1,t.crearId=null,new e(t,"add")}},{key:"blankCreate",value:function(){return e.create({title:"",description:"",deadline:null})}}]),e}(f.a)},311:function(t,e,o){"use strict";o(37);var n=o(21),r=o(31),d=o(25),c=o(33),l=o(34),v=o(303),m=[{id:1,name:"ノーマルタコヤキ",rarity:3,imgURL:"/TakoyakiTodo/image/takoyaki/takoyaki_character.png",addedAt:new Date("2020-02-03T06:00:00"),editedAt:new Date("2020-02-03T06:00:00")},{id:2,name:"コゲ太",rarity:1,imgURL:"/TakoyakiTodo/image/takoyaki/failed.png",addedAt:new Date("2020-02-09T01:07:00"),editedAt:new Date("2020-02-09T01:07:00")}];o.d(e,"a",(function(){return f}));var f=function(t){function e(t){var o;return Object(n.a)(this,e),(o=Object(d.a)(this,Object(c.a)(e).call(this,t))).imgURL=t.imgURL,o.name=t.name,o.rarity=t.rarity,o}return Object(l.a)(e,t),Object(r.a)(e,[{key:"getImageURL",value:function(){return this.imgURL}}],[{key:"get",value:function(t){var o=m.filter((function(e){return e.id===t}));return o.length>0?new e(o[0]):null}},{key:"getFailed",value:function(){return e.get(2)}}]),e}(v.a)},315:function(t,e,o){var content=o(354);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("6498a27c",content,!0,{sourceMap:!1})},316:function(t,e,o){var content=o(358);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("25127bdc",content,!0,{sourceMap:!1})},353:function(t,e,o){"use strict";var n=o(315);o.n(n).a},354:function(t,e,o){(e=o(11)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Kosugi+Maru&display=swap&subset=japanese);"]),e.push([t.i,'.todo-item-container{position:relative;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:rgba(96,125,139,.16863);background:radial-gradient(circle,transparent 0,hsla(0,0%,42%,.15) 70%,#fff 100%);border-radius:50%;width:100%;height:100%}.todo-item-container:before{display:block;width:0;padding-bottom:100%;content:""}.todo-item-container:hover{box-shadow:0 0 39px -11px #113d55}.todo-item-container--cleared{border-radius:50%}.todo-item-container .todo-item{position:absolute;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.todo-item-container .todo-item__text{font-family:Kosugi Maru,sans-serif}.todo-item-container .todo-item__text--cleared{font-family:Kosugi Maru,sans-serif;z-index:1;background-color:hsla(0,0%,42%,.5)}.todo-item-container .todo-item--cleared{color:#fff;text-shadow:0 0 14px #e7e8bc;width:100%}.todo-item__ex-text{font-family:Kosugi Maru,sans-serif;background-color:hsla(0,0%,42%,.15)}',""]),t.exports=e},357:function(t,e,o){"use strict";var n=o(316);o.n(n).a},358:function(t,e,o){(e=o(11)(!1)).push([t.i,".todo-list{background-color:#414446;padding-top:32px;padding-bottom:32px;padding-left:16px!important;padding-right:16px;display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-pack:center;justify-content:center}.todo-list .todo-container{list-style:none;width:48%;margin:1%}",""]),t.exports=e},370:function(t,e,o){"use strict";o.r(e);o(58);var n=o(19),r=o(306),d=o(311),c=(o(48),{name:"TodoForm",props:["TodoDataProp"],model:{prop:"TodoDataProp",event:"todoChanged"},methods:{allowedDate:function(t){return new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate())<=new Date(t)}},created:function(){this.TodoData.deadline&&(this.deadlineDate="".concat(this.TodoData.deadline.getFullYear(),"-").concat(this.TodoData.deadline.getMonth()+1,"-").concat(this.TodoData.deadline.getDate()))},data:function(){return{today:new Date,deadlineDate:null}},watch:{deadlineDate:function(t){var e=t.split("-");this.TodoData.deadline=new Date(e[0],e[1]-1,e[2],23,59,59,999)}},computed:{TodoData:{get:function(){return this.TodoDataProp},set:function(t){this.$emit("todoChanged",t)}}}}),l=o(57),v=o(80),m=o.n(v),f=o(371),h=o(373),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-text-field",{attrs:{label:"タイトル",placeholder:"〇〇を買いに行く",filled:"",rounded:"",dense:""},model:{value:t.TodoData.title,callback:function(e){t.$set(t.TodoData,"title",e)},expression:"TodoData.title"}}),t._v(" "),o("v-text-field",{attrs:{label:"説明書き",placeholder:"△△で、〇〇を◇個買いに行く。",filled:"",rounded:"",dense:""},model:{value:t.TodoData.description,callback:function(e){t.$set(t.TodoData,"description",e)},expression:"TodoData.description"}}),t._v(" "),o("h3",[t._v("期日")]),t._v(" "),o("v-date-picker",{staticClass:"ma-2",attrs:{locale:"ja","allowed-dates":t.allowedDate,color:"gray"},model:{value:t.deadlineDate,callback:function(e){t.deadlineDate=e},expression:"deadlineDate"}})],1)}),[],!1,null,null,null),k=component.exports;m()(component,{VDatePicker:f.a,VTextField:h.a});var y={name:"TodoEditCard",data:function(){return{}},props:["todoProp"],model:{prop:"todoProp",event:"todoChanged"},created:function(){console.log(this.todoProp)},components:{TodoForm:k},computed:{todo:{get:function(){return this.todoProp},set:function(t){this.$emit("todoChanged",t)}}},methods:{save:function(){return this.todo.save()},saveBtnClicked:function(){this.save(),this.$emit("saved")}}},w=o(130),D=o(305),_=o(302),T=o(352),x=Object(l.a)(y,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",[o("v-card-title",[t._v("ToDoの編集")]),t._v(" "),o("v-card-text",[o("todo-form",{model:{value:t.todo,callback:function(e){t.todo=e},expression:"todo"}})],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.saveBtnClicked()}}},[t._v("保存")])],1)],1)}),[],!1,null,null,null),C=x.exports;m()(x,{VBtn:w.a,VCard:D.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VSpacer:T.a});var A={name:"TodoItem",props:{todoItem:r.a},data:function(){return{todoDialog:{isActive:!1},editCard:{isActive:!1},failedTakoyaki:d.a.getFailed()}},components:{EditCard:C},methods:{openTodoModal:function(){this.todoDialog.isActive=!0},clearTodo:function(){this.todoDialog.isActive=!1,this.todoItem.clear()},deleteTodo:function(){this.todoDialog.isActive=!1,this.todoItem.delete(),this.$emit("deleted",this.todoItem)},editTodo:function(){this.todoDialog.isActive=!1,console.log(this.todoItem),this.editCard.isActive=!0}},computed:{clearButtonText:function(){return this.todoItem.isCleared?"達成済み":this.todoItem.isFailed()?"達成失敗":"達成"}}},I=(o(353),o(375)),O=Object(l.a)(A,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"todo-item-container",class:{"todo-item-container--cleared":t.todoItem.isCleared},on:{click:function(e){return e.stopPropagation(),t.openTodoModal()}}},[o("div",{staticClass:"todo-item"},[o("h3",{class:t.todoItem.isClearedOrFailed()?"todo-item__text--cleared":"todo-item__text"},[t._v("\n        "+t._s(t.todoItem.title)+"\n      ")])]),t._v(" "),o("transition",{attrs:{"enter-active-class":"animated pulse"}},[t.todoItem.isCleared?o("img",{staticClass:"todo-item todo-item--cleared",attrs:{src:t.todoItem.getTakoyakiImageURL(),alt:"takoyaki"}}):t._e(),t._v(" "),t.todoItem.isFailed()?o("img",{staticClass:"todo-item todo-item--cleared",attrs:{src:t.failedTakoyaki.getImageURL(),alt:t.failedTakoyaki.name}}):t._e()])],1),t._v(" "),o("div",{staticClass:"todo-item__ex-text pa-2 mt-1"},[o("p",{staticClass:"mb-0"},[t._v(t._s(t.todoItem.description))])]),t._v(" "),o("v-dialog",{model:{value:t.todoDialog.isActive,callback:function(e){t.$set(t.todoDialog,"isActive",e)},expression:"todoDialog.isActive"}},[t.todoItem?o("v-card",[o("v-card-title",[t._v(t._s(t.todoItem.title))]),t._v(" "),o("v-card-text",[o("p",[t._v(t._s(t.todoItem.description))]),t._v(" "),o("p",[o("span",[t._v("期日: ")]),t._v(t._s(t.todoItem.getDeadline()))])]),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{color:"primary",disabled:t.todoItem.isClearedOrFailed()},on:{click:function(e){return e.stopPropagation(),t.clearTodo()}}},[t._v(t._s(t.clearButtonText))]),t._v(" "),o("v-btn",{attrs:{color:"orange"},on:{click:function(e){return e.stopPropagation(),t.editTodo()}}},[t._v("編集")]),t._v(" "),o("v-btn",{on:{click:function(e){e.stopPropagation(),t.todoDialog.isActive=!1}}},[t._v("閉じる")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red"},on:{click:function(e){return e.stopPropagation(),t.deleteTodo()}}},[t._v("削除")])],1)],1):t._e()],1),t._v(" "),o("v-dialog",{model:{value:t.editCard.isActive,callback:function(e){t.$set(t.editCard,"isActive",e)},expression:"editCard.isActive"}},[t.todoItem?o("edit-card",{on:{saved:function(e){t.editCard.isActive=!1}},model:{value:t.todoItem,callback:function(e){t.todoItem=e},expression:"todoItem"}}):t._e()],1)],1)}),[],!1,null,null,null),j=O.exports;m()(O,{VBtn:w.a,VCard:D.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VDialog:I.a,VSpacer:T.a});var R={name:"TodoList",props:{todoList:Array},data:function(){return{}},components:{TodoItem:j},created:function(){},methods:{deleted:function(t){console.log(t),this.$emit("deleteTodo",t)}}},L=(o(357),Object(l.a)(R,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("ul",{staticClass:"todo-list"},t._l(t.todoList,(function(e){return o("li",{key:e.id,staticClass:"todo-container mb-4"},[o("todo-item",{attrs:{todoItem:e},on:{deleted:t.deleted}})],1)})),0)])}),[],!1,null,null,null).exports),V={name:"TodoAddCard",data:function(){return{newTodo:r.a.blankCreate()}},created:function(){},components:{TodoForm:k},methods:{addBtnClicked:function(){this.newTodo.save(),this.$emit("added",this.newTodo),this.newTodo=r.a.blankCreate()}}},M=Object(l.a)(V,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",[o("v-card-title",[t._v("ToDoの追加")]),t._v(" "),o("v-card-text",[o("todo-form",{model:{value:t.newTodo,callback:function(e){t.newTodo=e},expression:"newTodo"}})],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.addBtnClicked()}}},[t._v("追加")])],1)],1)}),[],!1,null,null,null),$=M.exports;m()(M,{VBtn:w.a,VCard:D.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VSpacer:T.a});var F,P={name:"TodoListPage",components:{ListComponent:L,TodoAddCard:$},data:function(){return{todoList:[],addCardDialog:!1}},created:function(){this.setTodoList()},methods:{setTodoList:(F=Object(n.a)(regeneratorRuntime.mark((function t(){var filter;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return filter={},t.next=3,r.a.getList(filter);case 3:this.todoList=t.sent;case 4:case"end":return t.stop()}}),t,this)}))),function(){return F.apply(this,arguments)}),todoAdded:function(){this.addCardDialog=!1,this.setTodoList()},deleteTodo:function(t){this.todoList=this.todoList.filter((function(e){return e.id!==t.id}))}}},U=o(368),B=Object(l.a)(P,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"pa-2 mb-2"},[o("v-row",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.addCardDialog=!0}}},[t._v("追加")])],1)],1),t._v(" "),o("list-component",{attrs:{todoList:t.todoList},on:{deleteTodo:t.deleteTodo}}),t._v(" "),o("v-dialog",{model:{value:t.addCardDialog,callback:function(e){t.addCardDialog=e},expression:"addCardDialog"}},[o("todo-add-card",{on:{added:t.todoAdded}})],1)],1)}),[],!1,null,null,null);e.default=B.exports;m()(B,{VBtn:w.a,VDialog:I.a,VRow:U.a,VSpacer:T.a})}}]);