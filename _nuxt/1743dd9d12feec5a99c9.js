(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{305:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(21),d=n(31),o=n(322),l=n.n(o),c=function(){function e(t){Object(r.a)(this,e),this.id=t.id,this.addedAt=t.addedAt,this.editedAt=t.addedAt}return Object(d.a)(e,[{key:"_getDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/mm/dd HH:MM";return l()(e,t)}}]),e}()},308:function(e,t,n){"use strict";n(16),n(5),n(4),n(81),n(58);var r=n(19),d=n(21),o=n(31),l=n(25),c=n(33),h=n(34),y=[{id:1,title:"タコヤキTODOを見る",description:"タコヤキTODOを見る。",addedAt:new Date,editedAt:new Date,isCleared:!1},{id:2,title:"TODOを追加する",description:"TODOを追加する。",addedAt:new Date,editedAt:new Date,isCleared:!1},{id:3,title:"設計する",description:"タコヤキTODOの設計をする。",addedAt:new Date,editedAt:new Date,isCleared:!1},{id:4,title:"開発する",description:"タコヤキTODOの開発をする。",addedAt:new Date,editedAt:new Date,isCleared:!1}],v=n(305),k=n(313),f=n(310),m=n.n(f),w=new(n(323).a)("TakoyakiDB");w.version(1).stores({todos:"id, title, description, addedAt, editedAt, clearedAt, deadline, isCleared, &clearId",todoClears:"id, todoId, takoyakiId, addedAt, editedAt",takoyakis:"id, name, imgURL, rarity, description, addedAt, editedAt"});var D=w,A=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).todo=e.todo,n.takoyakiId=e.takoyakiId,n.setTakoyakiItem(),t.lastId=n.id,n}var n,y;return Object(h.a)(t,e),Object(o.a)(t,[{key:"setTakoyakiItem",value:function(){this.takoyakiItem=k.a.get(this.takoyakiId)}},{key:"getTakoyakiImageURL",value:function(){return this.takoyakiItem.getImageURL()}},{key:"_save",value:(y=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.id,todoId:this.todo.id,takoyakiId:this.takoyakiItem.id,addedAt:this.addedAt,editedAt:this.editedAt},e.abrupt("return",D.todoClears.put(t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"save",value:function(){return this._save()}}],[{key:"create",value:function(e){e.id=m()(),e.addedAt=new Date,e.editedAt=new Date;var n=new t(e);return n._save(),n}},{key:"get",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.t0=t,e.next=4,D.todoClears.get(n);case 4:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}]),t}(v.a),O=new Date,j={today:new Date(new Date(O.setDate(O.getDate())).setHours(0,0,0,0)),tomorrow:new Date(new Date(O.setDate(O.getDate()+1)).setHours(23,59,59,999)),nextWeek:new Date(new Date(O.setDate(O.getDate()+7)).setHours(23,59,59,999)),nextMonth:new Date(new Date(O.setMonth((O.getMonth()+1)%12)).setHours(23,59,59,999))};n.d(t,"a",(function(){return C}));var C=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";switch(Object(d.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).title=e.title,n.description=e.description,n.deadline=e.deadline,r){case"add":n.isCleared=!1,n.clearId=null,n.clearedAt=null;break;case"load":n.isCleared=e.isCleared,n.clearId=e.clearId,n.clearedAt=e.clearedAt}return n}var n,v,k,f,w;return Object(h.a)(t,e),Object(o.a)(t,[{key:"getAddedAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy/mm/dd HH:MM";return this._getDate(this.addedAt,e)}},{key:"getEditedAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy/mm/dd HH:MM";return this._getDate(this.editedAt,e)}},{key:"getDeadline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy/mm/dd HH:MM";return this._getDate(this.deadline,e)}},{key:"clear",value:(w=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={todo:this,takoyakiId:1},this.clearObj=A.create(t),this.clearId=this.clearObj.id,this.clearedAt=new Date,this.isCleared=!0,e.next=7,this._save();case 7:return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"getTakoyakiImageURL",value:function(){return this.isCleared?this.clearObj.getTakoyakiImageURL():""}},{key:"isFailed",value:function(){return this.deadline<new Date&&!this.isCleared}},{key:"isClearedOrFailed",value:function(){return this.isFailed()||this.isCleared}},{key:"save",value:function(){return this._save()}},{key:"isDaily",value:function(){return j.today<=this.deadline&&this.deadline<j.tomorrow}},{key:"isWeekly",value:function(){return j.tomorrow<=this.deadline&&this.deadline<j.nextWeek}},{key:"isMonthly",value:function(){return j.nextWeek<=this.deadline&&this.deadline<j.nextMonth}},{key:"getRemainingDays",value:function(){return this.isClearedOrFailed()?0:this.deadline.getDate()-j.today.getDate()+1}},{key:"delete",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.todos.delete(this.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_save",value:(k=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.id,clearId:this.clearId,title:this.title,description:this.description,isCleared:this.isCleared,deadline:this.deadline,addedAt:this.addedAt,editedAt:this.editedAt},e.next=3,D.todos.put(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"loadClearData",value:(v=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("loadClearData: ",this),!this.isCleared){e.next=5;break}return e.next=4,A.get(this.clearId);case 4:this.clearObj=e.sent;case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})}],[{key:"getList",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var filter,n,r,d,o,l,c,h,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in filter=y.length>0&&void 0!==y[0]?y[0]:{},n={offset:0,limit:200,daily:!1,weekly:!1,monthly:!1})filter[r]||(filter[r]=n[r]);return d=j.today,o=j.tomorrow,l=j.nextWeek,c=j.nextMonth,h=D.todos,h=(h=filter.daily?h.where("deadline").between(d,o,!0,!0):filter.weekly?h.where("deadline").between(d,l,!0,!0):filter.monthly?h.where("deadline").between(d,c,!0,!0):h.toCollection()).offset(filter.offset).limit(filter.limit),e.next=12,h.sortBy("addedAt");case 12:return h=(h=(h=e.sent).map((function(e){return new t(e,"load")}))).map((function(e){return e.loadClearData()})),e.next=17,Promise.all(h);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"get",value:function(e){var n=y.filter((function(t){return t.id===Number(e)}));return n.length<1?null:new t(n[0])}},{key:"add",value:function(e){var n=t.create(e);return n._save(),n}},{key:"create",value:function(e){return e.addedAt=new Date,e.editedAt=new Date,e.id=m()(),e.isCleared=!1,e.crearId=null,new t(e,"add")}},{key:"blankCreate",value:function(){return t.create({title:"",description:"",deadline:null})}}]),t}(v.a)},313:function(e,t,n){"use strict";n(37);var r=n(21),d=n(31),o=n(25),l=n(33),c=n(34),h=n(305),y=[{id:1,name:"ノーマルタコヤキ",rarity:3,imgURL:"/TakoyakiTodo/image/takoyaki/takoyaki_character.png",addedAt:new Date("2020-02-03T06:00:00"),editedAt:new Date("2020-02-03T06:00:00")},{id:2,name:"コゲ太",rarity:1,imgURL:"/TakoyakiTodo/image/takoyaki/failed.png",addedAt:new Date("2020-02-09T01:07:00"),editedAt:new Date("2020-02-09T01:07:00")}];n.d(t,"a",(function(){return v}));var v=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).imgURL=e.imgURL,n.name=e.name,n.rarity=e.rarity,n}return Object(c.a)(t,e),Object(d.a)(t,[{key:"getImageURL",value:function(){return this.imgURL}}],[{key:"get",value:function(e){var n=y.filter((function(t){return t.id===e}));return n.length>0?new t(n[0]):null}},{key:"getFailed",value:function(){return t.get(2)}}]),t}(h.a)},385:function(e,t,n){"use strict";n.r(t);var r=n(308),d={name:"TodoDetail",props:["todo"]},o=n(57),l=n(80),c=n.n(l),h=n(307),y=n(304),component=Object(o.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v(e._s(e.todo.title))]),e._v(" "),n("v-card-text",[e._v(e._s(e.todo.description))]),e._v(" "),n("v-card-text",[e._v("追加日時: "+e._s(e.todo.getAddedAt()))]),e._v(" "),n("v-card-text",[e._v("編集日時: "+e._s(e.todo.getEditedAt()))])],1)}),[],!1,null,null,null),v=component.exports;c()(component,{VCard:h.a,VCardText:y.b,VCardTitle:y.c});var k={name:"TodoDetailPage",components:{TodoDetail:v},data:function(){return{todo:null}},created:function(){this.todo=r.a.get(this.$route.params.id)}},f=Object(o.a)(k,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("todo-detail",{attrs:{todo:this.todo}})],1)}),[],!1,null,null,null);t.default=f.exports}}]);